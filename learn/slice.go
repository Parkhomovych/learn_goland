package learn

import "fmt"

// Slice демонструє роботу зі зрізами (slice) в Go та передачу їх за посиланням
// Зріз (slice) - це динамічний масив, який може змінювати свій розмір
// Зріз складається з трьох компонентів:
// 1. Вказівник на базовий масив
// 2. Довжина зрізу (len)
// 3. Ємність зрізу (cap)
func Slice() {
	// Створюємо зріз books типу []Book з одним елементом
	// Синтаксис літералу зрізу: []Type{values...}
	books := []Book{
		{Name: "Book", Author: "Author"}, // Ініціалізуємо перший елемент
	}

	// Передаємо вказівник на зріз у функцію setBook
	// Використовуємо оператор & для отримання адреси зрізу
	setBook(&books)

	// Виводимо зріз books після модифікації
	// Зріз тепер містить два елементи
	fmt.Println(books)
}

// Book - структура, що представляє книгу з назвою та автором
type Book struct {
	Name   string // Назва книги
	Author string // Автор книги
}

// setBook - функція, що приймає вказівник на зріз книг і додає нову книгу
// Параметр b має тип *[]Book - вказівник на зріз книг
// Це дозволяє функції модифікувати оригінальний зріз
func setBook(b *[]Book) {
	// *b - розіменування вказівника для доступу до оригінального зрізу
	// append - вбудована функція для додавання елементів до зрізу
	// Створюємо нову книгу і додаємо її до зрізу
	*b = append(*b, Book{Name: "Book1", Author: "Author1"})
}
